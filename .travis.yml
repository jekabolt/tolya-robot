


language: generic

services:
  - docker  

addons:
  ssh_known_hosts: dotmarket.me


before_install:
  # add travis_rsa to connect to DO for deploy
  - openssl aes-256-cbc -K $encrypted_0ddd2445e49f_key -iv $encrypted_0ddd2445e49f_iv
    -in travis_rsa.enc -out travis_rsa -d
  - chmod 600 travis_rsa
  - mv travis_rsa ~/.ssh/id_rsa
  # build docker image and push to docker hub
  - echo "$DOCKER_PASSWORD" | docker login -u "$DOCKER_USERNAME" --password-stdin
  - docker build --no-cache -t ${TRAVIS_REPO_SLUG}:${TRAVIS_COMMIT} .
  - docker push ${TRAVIS_REPO_SLUG}/${TRAVIS_COMMIT}

install:
  - echo $'\n\n\n kek2 \n\n\n'
 

script:
 - echo $'\n\n\n kek3 \n\n\n'

after_success:
 - echo $'\n\n\n kek4 \n\n\n'